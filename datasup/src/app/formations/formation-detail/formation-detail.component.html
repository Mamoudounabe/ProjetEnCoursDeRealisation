
  <div class="header-section">
    <p class="breadcrumbs">
      <a class="breadcrumb-link" routerLink="/">DataSup</a> /
      <!-- <a class="breadcrumb-link" routerLink="/statistiques">Statistiques</a> / -->
      <a class="breadcrumb-link" routerLink="/formations">Formations</a> 
    </p>
  </div>
  


  
<!--   <div  class="changeYear">
    <mat-form-field >
      <mat-label>Session</mat-label>
      <mat-select [formControl]="selectedYear" panelClass="example-panel-{{selectedYear.value}}">
        <mat-option value="2020">2020</mat-option>
        <mat-option value="2021">2021</mat-option>
        <mat-option value="2022">2022</mat-option>
        <mat-option value="2023">2023</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
   -->
  
 <!--   <h2> Indicateurs de s√©lectivit√©</h2>

   <h3 *ngIf="etablissementData">
     üè´ {{ etablissementData.NomEtablissement || '√âtablissement inconnu' }}
   </h3>
 -->


  <div class="partie1">
   
   
  
    <!-- Bloc 1 : Informations sur l'√©tablissement -->
    <div class="chart-box" *ngIf="etablissementData && etablissementData.length > 0">
      <h2 >{{ etablissementData[0].NomEtablissement }} - {{ etablissementData[0].NomFormation }}</h2>
      <p><strong>Acad√©mie :</strong> {{ etablissementData[0].academie }}</p>
      <p><strong>R√©gion :</strong> {{ etablissementData[0].region }}</p>
      <p><strong> S√©lectivit√© :</strong> {{ etablissementData[0].selectivite }}</p>
    
      <a [href]="etablissementData[0].lien_parcoursup" target="_blank" class="none-style">Page de la formation sur Parcoursup</a>
    </div>
  
  
      <!-- Bloc 2 : Localisation -->
    <div class="chart-box">
      <h3>üìç Localisation</h3>
      <div id="map" class="map-container"></div>
    </div>
  
  
    <!-- Bloc 3 : Statistiques et Graphique -->
    <div class="chart-box">
      <p> En {{ selectedYear.value }}, cette formation accueillait 
        
        <strong>
          ({{ ((etablissementData[0]["toInteger(a.effectif_neo_bacheliers_admis)"] 
          / etablissementData[0]["toInteger(a.effectif_total_candidats_admis)"]) * 100) | number:'1.0-2' }} %)
        </strong> 
        de n√©o-bacheliers, pour 
        <strong> {{ etablissementData[0]["toInteger(a.effectif_total_candidats_admis)"] }} </strong> 
        candidats admis.    
      </p>
      <div class="chart-container" style="max-width: 500px;">
        <canvas baseChart
                [data]="candidatsBarChartData"
                [options]="candidatsBarChartOptions"
                [type]="barChartType">
        </canvas>
      </div>

    </div>
       
  
    <div class="chart-box marquee" id="pagecouleur">
      <p>
        Dans {{ etablissementData[0].NomEtablissement }} nous avons 
        <strong>{{ etablissementData[0]["toInteger(a.effectif_neo_bacheliers_mention_tres_bien_felicitation_bac_admis)"] }}</strong>
        Etudiants ayant une mention tr√®s bien et 
        <strong>{{ etablissementData[0]['toInteger(a.effectif_boursiers_admis)'] }}</strong>
        boursiers
      </p>
    </div>
  
  </div>
  


  <!--Partie 2 - Profil des candidats admis  -->


<div class="partie2">
  <div class="gauche2">
    <h2>
      <svg class="fontawesomesvg rotate" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="20" height="20">
        <path fill="red" d="M384 160c-17.7 0-32-14.3-32-32s14.3-32 32-32H544c17.7 0 32 14.3 32 32V288c0 17.7-14.3 32-32 32s-32-14.3-32-32V205.3L342.6 374.6c-12.5 12.5-32.8 12.5-45.3 0L192 269.3 54.6 406.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160c12.5-12.5 32.8-12.5 45.3 0L320 306.7 466.7 160H384z"/>
      </svg>
      <strong>Profil des candidats admis</strong>
    </h2>

    <!-- Contenu statique -->
    <div>
      <h1>
        En {{ selectedYear.value }}, {{ etablissementData[0].NomEtablissement }} accueillait 
        <strong>{{ etablissementData[0]["toInteger(a.effectif_neo_bacheliers_mention_bien_bac_admis)"] }}</strong> 
        <strong>
          ({{ ((etablissementData[0]["toInteger(a.effectif_neo_bacheliers_mention_bien_bac_admis)"] 
          / etablissementData[0]["toInteger(a.effectif_total_candidats_admis)"]) * 100) | number:'1.0-2' }}%)
        </strong> 
        de n√©o-bacheliers ayant obtenu la mention bien au bac.
      </h1>
      
      <ul>
        <li><strong>{{ etablissementData[0]['toInteger(a.effectif_technologiques_admis)'] }}</strong> √©tudiant venant d'une formation technologique</li>
        <li><strong>{{ etablissementData[0]['toInteger(a.effectif_generaux_admis)'] }}</strong> √©tudiant venant d'une formation g√©n√©rale</li>
        <li><strong>{{ etablissementData[0]['toInteger(a.effectif_professionnels_admis)'] }}</strong> √©tudiant venant d'une formation professionnelle</li>
      </ul>

      <h1>
        <p>
          Pour un effectif total de 
          <strong>{{ etablissementData[0]["toInteger(a.effectif_total_candidats_admis)"] }}</strong> 
          candidats admis.
        </p>
      </h1>
    </div>
  </div>
  
  <div class="droite2">

    <div class="bouton2">  
      <mat-button-toggle-group name="fontStyle" aria-label="Font Style" [(ngModel)]="selectedOption">
        <mat-button-toggle value="mention_bien">Mention au bac</mat-button-toggle>
        <mat-button-toggle value="sexe">Sexe</mat-button-toggle>
        <mat-button-toggle value="bourse">Bourse</mat-button-toggle>
        <mat-button-toggle value="academie">Acad√©mie</mat-button-toggle>
        <mat-button-toggle value="type_bac">Type de bac</mat-button-toggle>
      </mat-button-toggle-group>
    </div>
    
    <!-- Graphiques dynamiques -->
    <div *ngIf="selectedOption === 'mention_bien'" class="chart-container">
      <canvas id="mentionChart"></canvas>
    </div>
    
    <div *ngIf="selectedOption === 'bourse'" class="chart-container">
      <canvas id="bourseChart"></canvas>
    </div>
    
    <div *ngIf="selectedOption === 'type_bac'" class="chart-container">
      <canvas id="bacChart"></canvas>
    </div>
    
    <div *ngIf="selectedOption === 'academie'" class="chart-container">
      <canvas id="academieChart"></canvas>
    </div>
    
    <div *ngIf="selectedOption === 'sexe'" class="chart-container">
      <canvas id="sexeChart"></canvas>
    </div>
  </div>
</div>


<!--Partie 3 - Analyse des admissions -->
<div class="partie3">
  <div class="tabs-container">
    <div class="tabs">
      <button [class.active]="activeTab === 'tauxAcces'" (click)="showTauxAcces()">Taux d'acc√®s</button>
      <button [class.active]="activeTab === 'dureeSelection'" (click)="showDureeSelection()">Dur√©e de s√©lection</button>
    </div>

    <div class="tab-content">
      <!-- Taux d'acc√®s -->
      <div *ngIf="activeTab === 'tauxAcces'" class="two-columns">
        <div class="chart-wrapper">
          <canvas *ngIf="!afficherEvolution" baseChart
            [data]="tauxChartData"
            [options]="tauxChartOptions"
            [type]="'bar'">
          </canvas>
          <canvas *ngIf="afficherEvolution" baseChart
            [data]="tauxMultiChartData"
            [options]="tauxMultiChartOptions"
            [type]="'bar'">
          </canvas>
        </div>
        
        <div class="info-panel">
          <h4>En {{ sessionAnnee }}, le taux d'acc√®s √©tait de <strong>{{ tauxAcces }}%</strong></h4>
          <p>Sur <strong>{{ totalCandidats }} candidats</strong>, {{ tauxAcces }}% avaient un rang suffisant.</p>
          
          <div class="meta-info">
            <p><strong>Session:</strong> {{ sessionAnnee }}</p>
            <p><strong>Source:</strong> Open Data Parcoursup</p>
            <p><strong>Mise √† jour:</strong> 16/01/2025</p>
          </div>
        </div>
      </div>

      <!-- Dur√©e de s√©lection -->
      <div *ngIf="activeTab === 'dureeSelection'" class="two-columns">
        <div class="chart-wrapper">
          <canvas *ngIf="!afficherEvolution" baseChart
            [data]="dureeChartData"
            [options]="dureeChartOptions"
            [type]="'bar'">
          </canvas>
          <canvas *ngIf="afficherEvolution" baseChart
            [data]="dureeMultiChartData"
            [options]="dureeMultiChartOptions"
            [type]="'bar'">
          </canvas>
        </div>
        
        <div class="info-panel">
          <h4>Analyse de la dur√©e de s√©lection</h4>
          <p>Cette visualisation montre √† quel moment les candidats ont √©t√© admis.</p>
          
          <div class="meta-info">
            <p><strong>Session:</strong> {{ sessionAnnee }}</p>
            <p><strong>Source:</strong> Open Data Parcoursup</p>
            <p><strong>Mise √† jour:</strong> 16/01/2025</p>
          </div>
        </div>
      </div>
    </div>

    <div class="evolution-toggle">
      <mat-checkbox [(ngModel)]="afficherEvolution">
        Afficher l'√©volution pluriannuelle
      </mat-checkbox>
    </div>
  </div>
</div>
















<div class="dernier">
 