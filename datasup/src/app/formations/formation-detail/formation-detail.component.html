<h2>ğŸ“Š Indicateurs de sÃ©lectivitÃ©</h2>

<h3 *ngIf="etablissementData">
  ğŸ« {{ etablissementData.NomEtablissement || 'Ã‰tablissement inconnu' }}
</h3>

<div class="tabs">
  <button [class.active]="activeTab === 'tauxAcces'" (click)="showTauxAcces()">Taux dâ€™accÃ¨s</button>
  <button [class.active]="activeTab === 'dureeSelection'" (click)="showDureeSelection()">DurÃ©e du processus de sÃ©lection</button>
</div>

<!-- Onglet : Taux d'accÃ¨s -->
<div *ngIf="activeTab === 'tauxAcces'" class="two-columns">
  <div class="chart-wrapper">
    <canvas
      *ngIf="!afficherEvolution"
      baseChart
      [data]="tauxChartData"
      [options]="tauxChartOptions"
      [type]="'bar'"
    ></canvas>

    <canvas
      *ngIf="afficherEvolution"
      baseChart
      [data]="tauxMultiChartData"
      [options]="tauxMultiChartOptions"
      [type]="'bar'"
    ></canvas>
  </div>

  <div class="info-text">
    <p>
      En {{ sessionAnnee }}, le <strong>taux dâ€™accÃ¨s</strong> de la formation Ã©tait de
      <strong class="highlight">{{ tauxAcces }} %</strong> : cela veut dire que
      <strong>{{ tauxAcces }} % des {{ totalCandidats }} candidats</strong>
      avaient un rang leur permettant de recevoir une proposition.
    </p>

    <p><strong>ğŸ“… Session :</strong> {{ sessionAnnee }}</p>
    <p><strong>ğŸ‘¥ Champ :</strong> {{ totalCandidats }} candidats</p>
    <p><strong>ğŸ“‚ Source :</strong> DonnÃ©es open data Parcoursup</p>
    <p><strong>ğŸ“Œ DerniÃ¨re mise Ã  jour :</strong> 16/01/2025</p>

    <p><strong>ğŸ”— Quelques rÃ©fÃ©rences sur le sujet :</strong></p>
    <ul>
      <li><a href="#">Un premier bilan de lâ€™accÃ¨s Ã  lâ€™enseignement supÃ©rieur (2020)</a></li>
      <li><a href="#">Parcoursup - SÃ©nat (2023)</a></li>
      <li><a href="#">Rapport annuel : ComitÃ© Parcoursup (2023)</a></li>
    </ul>
  </div>
</div>

<!-- Onglet : DurÃ©e du processus -->
<div *ngIf="activeTab === 'dureeSelection'" class="two-columns">
  <div class="chart-wrapper">
    <canvas
      *ngIf="!afficherEvolution"
      baseChart
      [data]="dureeChartData"
      [options]="dureeChartOptions"
      [type]="'bar'"
    ></canvas>

    <canvas
      *ngIf="afficherEvolution"
      baseChart
      [data]="dureeMultiChartData"
      [options]="dureeMultiChartOptions"
      [type]="'bar'"
    ></canvas>
  </div>

  <div class="info-text">
    <p>Cette visualisation montre Ã  quel moment les candidats ont Ã©tÃ© admis Ã  la formation.</p>

    <p><strong>ğŸ”“ Ã€ lâ€™ouverture :</strong> dÃ¨s le dÃ©but de la phase principale</p>
    <p><strong>ğŸ“ Avant bac :</strong> avant lâ€™obtention du baccalaurÃ©at</p>
    <p><strong>â³ Fin de phase principale :</strong> juste avant la fin</p>
    <p><strong>ğŸ“® Phase complÃ©mentaire :</strong> aprÃ¨s la phase principale</p>

    <p><strong>ğŸ“… Session :</strong> {{ sessionAnnee }}</p>
    <p><strong>ğŸ‘¥ Champ :</strong> {{ totalCandidats }} candidats</p>
    <p><strong>ğŸ“‚ Source :</strong> DonnÃ©es open data Parcoursup</p>
    <p><strong>ğŸ“Œ DerniÃ¨re mise Ã  jour :</strong> 16/01/2025</p>

    <p><strong>ğŸ”— Pour aller plus loin :</strong></p>
    <ul>
      <li><a href="#">Comprendre le calendrier Parcoursup (2024)</a></li>
      <li><a href="#">Analyse des admissions en phase complÃ©mentaire</a></li>
      <li><a href="#">Rapport annuel : ComitÃ© Parcoursup (2023)</a></li>
    </ul>
  </div>
</div>

<!-- Checkbox visible et encadrÃ© -->
<div class="evolution-checkbox">
  <label>
    <input type="checkbox" [(ngModel)]="afficherEvolution" />
    ğŸ” Afficher lâ€™Ã©volution sur plusieurs annÃ©es
  </label>
</div>
