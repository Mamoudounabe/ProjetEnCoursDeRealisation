<div *ngIf="isLoading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Chargement des formations en cours...</p>
</div>



   <div class="statistique-logo">
    <svg class="fontawesomesvg rotate" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="30" height="30">
     
      <path fill="red" d="M384 160c-17.7 0-32-14.3-32-32s14.3-32 32-32H544c17.7 0 32 14.3 32 32V288c0 17.7-14.3 32-32 32s-32-14.3-32-32V205.3L342.6 374.6c-12.5 12.5-32.8 12.5-45.3 0L192 269.3 54.6 406.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160c12.5-12.5 32.8-12.5 45.3 0L320 306.7 466.7 160H384z"/>
    </svg>
  
    <span class="stat-text">Statistiques par formation</span>
  </div>




<!-- Barre de recherche -->
 
<div class="search-bar">
    <h2>Rechercher une formation</h2>
    <input
        type="text"
        placeholder='Rechercher une formation, ex: "Licence Informatique", "Licence Dijon", "Informatique", "BUT Informatique Dijon", "Dijon", etc.'
        aria-label="Search"
        [(ngModel)]="searchQuery"
        (input)="filterFormations()">

</div>

<!-- Tableau des formations -->
<div class="formation-table">
    <table>
        <thead>
            <tr>
                <!-- Colonne Établissement -->
                <th>
                    <!-- Nom de la colonne -->
                    <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">
                        Établissement
                    </div>
                
                    <!-- Barre de recherche -->
                    <div style="border-top: 2px solid #ccc; padding-top: 30px;">
                        <input 
                            type="text" 
                            [(ngModel)]="searchEtablissement" 
                            placeholder="" 
                            (input)="filterFormations()"
                            aria-label="Rechercher un établissement"
                            style="width: 100%; height: 40px; padding: 8px; font-size: 16px; border: 1px solid #ddd; border-radius: 4px; background-color: #f9f9f9;"
                        >
                    </div>
                </th>

                <!-- Colonne Commune -->
                <th>
                    <!-- Nom de la colonne -->
                    <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">
                        Commune
                    </div>
                
                    <!-- Barre de recherche -->
                    <div style="border-top: 2px solid #ccc; padding-top: 30px;">
                        <input 
                            type="text" 
                            [(ngModel)]="searchCommune" 
                            placeholder="" 
                            (input)="filterFormations()"
                            aria-label="Rechercher une commune"
                            style="width: 100%; height: 40px; padding: 8px; font-size: 16px; border: 1px solid #ddd; border-radius: 4px; background-color: #f9f9f9;"
                        >
                    </div>
                </th>

                <!-- Colonne Académie -->
                <th>
                    <!-- Nom de la colonne -->
                    <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">
                        Académie
                    </div>
                
                    <!-- Barre de recherche -->
                    <div style="border-top: 2px solid #ccc; padding-top: 30px;">
                        <input 
                            type="text" 
                            [(ngModel)]="searchAcademie" 
                            placeholder="" 
                            (input)="filterFormations()"
                            aria-label="Rechercher une académie"
                            style="width: 100%; height: 40px; padding: 8px; font-size: 16px; border: 1px solid #ddd; border-radius: 4px; background-color: #f9f9f9;"
                        >
                    </div>
                </th>

                <!-- Colonne Filière -->
                <th>
                    <!-- Nom de la colonne -->
                    <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">
                        Filière
                    </div>
                
                    <!-- Barre de recherche -->
                    <div style="border-top: 2px solid #ccc; padding-top: 30px;">
                        <input 
                            type="text" 
                            [(ngModel)]="searchFiliere" 
                            placeholder="" 
                            (input)="filterFormations()"
                            aria-label="Rechercher une filière"
                            style="width: 100%; height: 40px; padding: 8px; font-size: 16px; border: 1px solid #ddd; border-radius: 4px; background-color: #f9f9f9;"
                        >
                    </div>
                </th>

                <!-- Colonne Filière détaillée -->
                <th>
                    <!-- Nom de la colonne -->
                    <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">
                        Filière détaillée
                    </div>
                
                    <!-- Barre de recherche -->
                    <div style="border-top: 2px solid #ccc; padding-top: 30px;">
                        <input 
                            type="text" 
                            [(ngModel)]="searchFiliereDetaillee" 
                            placeholder="" 
                            (input)="filterFormations()"
                            aria-label="Rechercher une filière détaillée"
                            style="width: 100%; height: 40px; padding: 8px; font-size: 16px; border: 1px solid #ddd; border-radius: 4px; background-color: #f9f9f9;"
                        >
                    </div>
                </th>

                <!-- Colonne Filière très détaillée -->
                <th>
                    <!-- Nom de la colonne -->
                    <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">
                        Filière très détaillée
                    </div>
                
                    <!-- Barre de recherche -->
                    <div style="border-top: 2px solid #ccc; padding-top: 30px;">
                        <input 
                            type="text" 
                            [(ngModel)]="searchFiliereTresDetaillee" 
                            placeholder="" 
                            (input)="filterFormations()"
                            aria-label="Rechercher une filière très détaillée"
                            style="width: 100%; height: 40px; padding: 8px; font-size: 16px; border: 1px solid #ddd; border-radius: 4px; background-color: #f9f9f9;"
                        >
                    </div>
                </th>

                <!-- Colonne Statut -->
                <th>
                    <!-- Nom de la colonne -->
                    <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">
                        Statut
                    </div>
                
                    <!-- Barre de recherche -->
                    <div style="border-top: 2px solid #ccc; padding-top: 30px;">
                        <input 
                            type="text" 
                            [(ngModel)]="searchStatut" 
                            placeholder="" 
                            (input)="filterFormations()"
                            aria-label="Rechercher un statut"
                            style="width: 100%; height: 40px; padding: 8px; font-size: 16px; border: 1px solid #ddd; border-radius: 4px; background-color: #f9f9f9;"
                        >
                    </div>
                </th>

                <!-- Colonne Sélectivité -->
                <th>
                    <!-- Nom de la colonne -->
                    <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">
                        Sélectivité
                    </div>
                
                    <!-- Barre de recherche -->
                    <div style="border-top: 2px solid #ccc; padding-top: 30px;">
                        <input 
                            type="text" 
                            [(ngModel)]="searchSelectivite" 
                            placeholder="" 
                            (input)="filterFormations()"
                            aria-label="Rechercher une sélectivité"
                            style="width: 100%; height: 40px; padding: 8px; font-size: 16px; border: 1px solid #ddd; border-radius: 4px; background-color: #f9f9f9;"
                        >
                    </div>
                </th>

                   
                   
  <th>          
                    <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">
                        Nombre d'admis
                    </div>
                      
                   
                    <mat-slider>
                        <input matSliderThumb>
                      </mat-slider>
                </th>


                


            </tr>
        </thead>



        
        <tbody *ngIf="filteredFormations.length > 0">
            <tr *ngFor="let formation of filteredFormations" 
                (click)="goToFormation(formation.id_filiere)">

                <td>{{ formation.etablissement }}</td>
                <td>{{ formation.commune_etablissement || 'N/A' }}</td>
                <td>{{ formation.academie_etablissement }}</td>
                <td>{{ formation.filiere_formation }}</td>
                <td>{{ formation.filiere_formation_detaillee }}</td>
                <td>{{ formation.filiere_formation_tres_detaillee || 'N/A' }}</td>
                <td>{{ formation.statut_etablissement_filiere }}</td>
                <td>{{ formation.selectivite }}</td>

                <td>{{ formation.effectif_total_candidats_admis || 'N/A' }}</td>
               
        

            </tr>
        </tbody>
    </table>


                

</div>


<mat-paginator class="custom-paginator"
 [length]="totalItems"
 [pageSize]="pageSize"
 [pageSizeOptions]="[5, 10, 25, 100]"
 aria-label="Select page"
 (page)="onPageChange($event)">
</mat-paginator>
